# :: ------------------------------------------------------------------------ :: #
# ::                                 SETTINGS                                 :: #
# :: ------------------------------------------------------------------------ :: #

# Unbind default prefix (Ctrl+b)
unbind C-b

# New prefix Alt+f
set -g prefix M-f
bind M-f send-prefix     # Allow sending prefix in nested sessions

# Enable mouse support (selection, scroll, resize)
set -g mouse on

# Use VI mode for copy / selection
set -g mode-keys vi

# ----------------------------------------------------------------------------- #
#                              PANE SPLITTING                                   #
# ----------------------------------------------------------------------------- #

# Prefix + h/v → split pane
bind h split-window -h    # Horizontal split
bind v split-window -v    # Vertical split

# Navigate between panes with Alt + h/j/k/l (no prefix)
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# ----------------------------------------------------------------------------- #
#                            COLORS AND TERMINAL                                #
# ----------------------------------------------------------------------------- #

# Force truecolor if terminal supports it
set-option -ga terminal-overrides ",*256col*:Tc"

# Default terminal with 256 colors
set -g default-terminal "screen-256color"

# Pane borders
set -g pane-border-style fg="#252850"
set -g pane-active-border-style fg="#00afff"

# ----------------------------------------------------------------------------- #
#                             BASIC CONFIGURATION                                #
# ----------------------------------------------------------------------------- #

# Status bar position (bottom / top)
set -g status-position bottom

# Start window and pane index at 1
set -g base-index 1
set -g pane-base-index 1

# Automatically renumber windows when one is closed
set -g renumber-windows on

# Automatically rename windows based on active program
set -g automatic-rename on

# Allow tmux to update terminal title
set -g set-titles on

# :: ================== AGNOSTER-STYLE STATUS BAR ================== :: #

# Global status bar colors
set -g status-fg "#C0C0C0"
set -g status-bg "#0c0c0d"

# Maximum lengths
set -g status-left-length 65
set -g status-right-length 45

# No bold or underline
set -g status-left-style "none"
set -g status-right-style "none"

# Status bar alignment
set -g status-justify right

# Refresh interval
set -g status-interval 3

# ------------------- LEFT STATUS BAR ------------------- #

set -g status-left '\
#[fg=#575657,bg=#202020]  #{session_name} #[fg=#202020,bg=#2d2d2d]\
#[fg=#4d4c4d,bg=#2d2d2d]  #{host} #[fg=#2d2d2d,bg=#202020]\
#[fg=#575657,bg=#202020]  #{user} #[fg=#202020,bg=#2d2d2d]\
#[fg=#4d4c4d,bg=#2d2d2d] 󰝰 #(basename #{pane_current_path}) #[fg=#2d2d2d,bg=#0c0c0d]\
#[default]#{?client_prefix, 󰧹 ,}'

# Right status bar empty
set -g status-right ''

# --------------------------- WINDOWS IN STATUS BAR --------------------------- #

# Active window
set -g window-status-current-format '#[fg=#575657,bg=#202020]  #{window_index}:#{pane_index} #{window_name} #[default]'

# Inactive windows
set -g window-status-format '#[fg=#4d4c4d,bg=#2d2d2d]  #I #W:#{pane_index} #[default]'

# No separator
set -g window-status-separator ""

# ============================================================================ #
#                        OPTIONAL IMPROVEMENTS (SAFE)                          #
# ============================================================================ #

# Increase scrollback history (very useful)
# set -g history-limit 10000

# Reduce ESC delay (Vim inside tmux feels more responsive)
# set -sg escape-time 0

# Quickly reload configuration: Alt+f + r
# bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

